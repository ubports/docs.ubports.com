.. _sdk_u1db_query:

U1db Query
==========

Query filters documents based on the query and index.

+---------------------+-----------------+
| Import Statement:   | import U1db .   |
+---------------------+-----------------+
| Instantiates:       | Query           |
+---------------------+-----------------+

Properties
----------

-  :ref:`documents <sdk_u1db_query_documents>` : list<string>
-  :ref:`index <sdk_u1db_query_index>` : Index
-  :ref:`query <sdk_u1db_query_query>` : Variant
-  :ref:`results <sdk_u1db_query_results>` : list<Variant>

Detailed Description
--------------------

In a ListView the Query can be used as a model.

.. code:: qml

    ListView {
        model: Query {
            index: Index {
                name: 'colorIndex'
                expression: [ 'color' ]
                database: myDatabase
            }
            query: [ 'blue' ]
        }
        delegate: ListItem.Subtitled {
            text: docId
            subText: contents.color
        }
    }

**See also** :ref:`Index <sdk_u1db_index>`.

Property Documentation
----------------------

.. _sdk_u1db_query_documents:

+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| documents : list<string>                                                                                                                                                                                                                                                                                     |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

The docId's of all matched documents.

.. _sdk_u1db_query_index:

+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| index : :ref:`Index <sdk_u1db_index>`                                                                                                                                                                                                                                                                           |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Sets the Index to use. *index* must have a valid name and index expressions. If no query is set, the default is all results of the index.

.. _sdk_u1db_query_query:

+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| query : Variant                                                                                                                                                                                                                                                                                              |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

A query in one of the allowed forms: 'value', ['value'] or [{'sub-field': 'value'}]. The default is equivalent to '\*'.

.. _sdk_u1db_query_results:

+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| results : list<Variant>                                                                                                                                                                                                                                                                                      |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

The results of the query as a list.

